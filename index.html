<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nico Maggioli Portfolio</title>
    <meta name="description" content="Personal portfolio gallery by Nico Maggioli." />
    <link rel="icon" type="image/png" href="/nm_fav.png" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png?v=20260213-3" />
    <link rel="stylesheet" href="/styles.css?v=arena-20260220-999" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
  
    <style>
        /* ORAGE-STYLE LOADER */
        .loader-overlay {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            background: #000 !important;
            z-index: 2147483647 !important;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: opacity 0.8s ease-in-out, visibility 0.8s;
        }

        .loader-content {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 80%;
            max-width: 600px;
        }

        .loader-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .loader-bar-container {
            width: 100%;
            height: 2px;
            background: #333;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        .loader-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: #fff;
            width: 0%;
            transition: width 0.1s linear;
        }

        /* HERO SECTION */
        .n-hero {
            position: relative;
            width: 100vw;
            left: 50%;
            right: 50%;
            margin-left: -50vw;
            margin-right: -50vw;
            height: calc(100vh - 56px); /* full page minus topbar */
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .n-hero-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
        }
        
        /* Eliminate double top margin for channel-head below hero */
        .channel-head {
            margin-top: 40px !important;
        }
    </style>
\n  </head>
  <body>
    <div class="app-shell">
      <header class="topbar">
        <div class="topbar-left">
          <a class="brand-mark" href="/" aria-label="Home">
            <img src="/logo-nm.png" alt="Nico Maggioli logo" loading="eager" decoding="async" />
          </a>
          <a class="search-link" href="/" aria-label="Portfolio home">Nico Maggioli</a>
        </div>

        <div class="topbar-right">
          <nav class="top-nav" aria-label="Site">
            <a class="top-nav-link is-active" href="/">Work</a>
            <a class="top-nav-link" href="/projects.html">Projects</a>
            <a class="top-nav-link" href="/about.html">About</a>
            <a class="top-nav-link" href="/contact.html">Contact</a>
          </nav>
        </div>
      </header>

      <main class="page-shell">\n
    <!-- ORAGE LOADER -->
    <div class="loader-overlay" id="n-loader">
        <div class="loader-content">
            <div>Console setup</div>
            <div>-------------</div>
            <div id="loader-text">Loading site : 0%</div>
            <div>Setting type : {NICOMAGGIOLI PORTFOLIO}</div>
            <div class="loader-bar-container">
                <div class="loader-bar" id="loader-bar"></div>
            </div>
        </div>
    </div>

    <!-- NICO HERO -->
    <section class="n-hero">
        <video class="n-hero-video" autoplay muted loop playsinline>
            <source src="/Animation_Reel.mp4" type="video/mp4">
        </video>
    </section>

        <section class="channel-head">
          <h1 class="channel-title">Nico Maggioli / Design Lab / Live Work Archive</h1>
          <p class="channel-subtitle channel-subtitle-single-line">
            Creative strategy, visual identity, and 3D-driven systems. This board is a collection of my&nbsp;work&nbsp;throughout&nbsp;the&nbsp;years.
          </p>
        </section>

        <section class="channel-meta" aria-label="Portfolio details">
          <article class="meta-col">
            <h2>Dataset</h2>
            <dl class="meta-list">
              <div>
                <dt>Since</dt>
                <dd id="metaStarted" data-static="true">2014</dd>
              </div>
              <div>
                <dt>Currently At</dt>
                <dd id="metaModified" data-static="true">Sprout Studios</dd>
              </div>
              <div>
                <dt>Items</dt>
                <dd id="metaLength" data-static="true">179+</dd>
              </div>
            </dl>
          </article>

          <article class="meta-col">
            <h2>Skills</h2>
            <ul class="meta-tags">
              <li>Creative strategy</li>
              <li>Visual identity</li>
              <li>3D visualization</li>
              <li>AI-assisted exploration</li>
            </ul>
          </article>

          <p class="status-pill" id="statusPill">Connecting...</p>
        </section>

        <section class="board-wrap">
          <section class="board" id="board" aria-live="polite"></section>
          <div class="empty-state" id="emptyState" hidden>
            <h2>No work uploaded yet</h2>
            <p>Add media to <code>public/media</code> and it will appear&nbsp;here.</p>
          </div>
        </section>
      </main>
    </div>

    <div class="lightbox" id="lightbox" hidden>
      <button class="lightbox-close" id="lightboxClose" aria-label="Close image">Close</button>
      <button class="lightbox-nav lightbox-prev" id="lightboxPrev" type="button" aria-label="Previous image">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15 5l-7 7 7 7" /></svg>
      </button>
      <figure class="lightbox-content" id="lightboxContent">
        <img id="lightboxImage" alt="Expanded portfolio image" />
        <video id="lightboxVideo" muted loop playsinline preload="metadata" hidden></video>
      </figure>
      <button class="lightbox-nav lightbox-next" id="lightboxNext" type="button" aria-label="Next image">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M9 5l7 7-7 7" /></svg>
      </button>
    </div>

    <template id="cardTemplate">
      <article class="pin-card pin-card-image">
        <button class="pin-button" type="button">
          <div class="pin-media-slot"></div>
        </button>
      </article>
    </template>

    <script src="/app.js?v=arena-20260214-3" defer></script>
  
    <script>
        // ORAGE LOADER LOGIC
        window.addEventListener('load', () => {
            const loader = document.getElementById('n-loader');
            const loaderBar = document.getElementById('loader-bar');
            const loaderText = document.getElementById('loader-text');
            
            // Prevent scrolling while loading
            document.documentElement.style.overflow = 'hidden';
            document.documentElement.style.height = '100vh';
            document.body.style.overflow = 'hidden';
            document.body.style.height = '100vh';
            document.body.style.position = 'fixed'; // Prevents mobile Safari bounce
            document.body.style.width = '100%';
            
            let progress = 0;
            // Detect if mobile (slower load to ensure smooth performance)
            const isMobile = window.innerWidth <= 768;
            const stepMs = isMobile ? 120 : 80;
            const progressStep = isMobile ? (Math.floor(Math.random() * 8) + 2) : (Math.floor(Math.random() * 15) + 5);

            const interval = setInterval(() => {
                progress += isMobile ? (Math.floor(Math.random() * 8) + 2) : (Math.floor(Math.random() * 15) + 5);
                if (progress > 100) progress = 100;
                
                if(loaderBar) loaderBar.style.width = progress + '%';
                if(loaderText) loaderText.innerText = 'Loading site : ' + progress + '%';
                
                if (progress === 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        if(loader) {
                            loader.style.opacity = '0';
                            setTimeout(() => {
                                loader.classList.add('hidden');
                                document.documentElement.style.overflow = '';
                                document.documentElement.style.height = '';
                                document.body.style.overflow = '';
                                document.body.style.height = '';
                                document.body.style.position = '';
                                document.body.style.width = ''; // Restore scrolling
                            }, 800); // Wait for fade out
                        }
                    }, 400); 
                }
            }, stepMs);
        });
    </script>
\n  </body>
</html>
